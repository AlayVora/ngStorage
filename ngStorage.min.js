/*! ngStorage 0.3.0 | Copyright (c) 2015 Gias Kay Lee | MIT License */!function(a,b){"use strict";return"function"==typeof define&&define.amd?void define("ngStore",["angular"],function(a){return b(a)}):b(a)}("undefined"==typeof angular?null:angular,function(a){"use strict";function b(b){return["$rootScope","$window","$log","$timeout",function(c,d,e,f){var g,h,i,j={$default:function(b){for(var c in b)a.isDefined(j[c])||(j[c]=b[c]);return j},$reset:function(a){for(var b in j)"$"===b[0]||delete j[b];return j.$default(a)}};try{g=d[b],g.length}catch(k){e.warn("This browser does not support Web Storage!"),g={}}for(var l,m=0,n=g.length;n>m;m++)(l=g.key(m))&&"ngStorage-"===l.slice(0,10)&&(j[l.slice(10)]=a.fromJson(g.getItem(l)));return h=a.copy(j),c.$watch(function(){var b;i||(i=f(function(){if(i=null,!a.equals(j,h)){b=a.copy(h),a.forEach(j,function(c,d){a.isDefined(c)&&"$"!==d[0]&&g.setItem("ngStorage-"+d,a.toJson(c)),delete b[d]});for(var c in b)g.removeItem("ngStorage-"+c);h=a.copy(j)}},100,!1))}),"localStorage"===b&&d.addEventListener&&d.addEventListener("storage",function(b){"ngStorage-"===b.key.slice(0,10)&&(b.newValue?j[b.key.slice(10)]=a.fromJson(b.newValue):delete j[b.key.slice(10)],h=a.copy(j),c.$apply())}),j}]}a.module("ngStorage",[]).factory("$localStorage",b("localStorage")).factory("$sessionStorage",b("sessionStorage"))});