/*! ngStorage 0.3.0 | Copyright (c) 2014 Gias Kay Lee | MIT License */"use strict";!function(){function a(a){return["$rootScope","$window","$log",function(b,c,d){var e,f,g=c[a]||(d.warn("This browser does not support Web Storage!"),{}),h={$default:function(a){for(var b in a)angular.isDefined(h[b])||(h[b]=a[b]);return h},$reset:function(a){for(var b in h)"$"===b[0]||delete h[b];return h.$default(a)},$sync:function(){for(var a,b=0;b<g.length;b++)(a=g.key(b))&&"ngStorage-"===a.slice(0,10)&&(h[a.slice(10)]=angular.fromJson(g.getItem(a)))}};return h.$sync(),e=angular.copy(h),b.$watch(function(){f||(f=setTimeout(function(){if(f=null,!angular.equals(h,e)){angular.forEach(h,function(a,b){angular.isDefined(a)&&"$"!==b[0]&&g.setItem("ngStorage-"+b,angular.toJson(a)),delete e[b]});for(var a in e)g.removeItem("ngStorage-"+a);e=angular.copy(h)}},100))}),"localStorage"===a&&c.addEventListener&&c.addEventListener("storage",function(a){"ngStorage-"===a.key.slice(0,10)&&(a.newValue?h[a.key.slice(10)]=angular.fromJson(a.newValue):delete h[a.key.slice(10)],e=angular.copy(h),b.$apply())}),h}]}angular.module("ngStorage",[]).factory("$localStorage",a("localStorage")).factory("$sessionStorage",a("sessionStorage"))}();